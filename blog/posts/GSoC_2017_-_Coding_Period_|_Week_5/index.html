<!DOCTYPE html>
<html>
  <head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <link rel="shortcut icon" type="image/jpeg" href="../../../assets/images/logo.png" />
    <!-- Site Properities -->
    <meta name="generator" content="DocPad v6.78.4" />
    <title> Athitya Kumar | GSoC 2017 - Coding Period | Week 5 </title>
    <meta name="description" content="Through this blog post, I'd like to document my progress in the fifth week of the Coding period, Google Summer of Code 2017. Also contains a summary of updates from the first month." />
    <meta name="keywords" content="athitya,kumar,iit,iitkgp,developer,open,source,coder,programmer,mechanical,engineering,chess,carnatic,vocalist,tv,series,blog,Through,this,blog,post,,I'd,like,to,document,my,progress,in,the,fifth,week,of,the,Coding,period,,Google,Summer,of,Code,2017.,Also,contains,a,summary,of,updates,from,the,first,month." />
    <meta property="og:title" content="GSoC 2017 - Coding Period | Week 5" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://athityakumar.github.io/blog/posts/GSoC_2017_-_Coding_Period_|_Week_5/" />
    <meta property="og:image" content="https://athityakumar.github.io/assets/images/blog/GSoC_2017_-_Coding_Period_|_Week_5/gsoc.png" />
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta property="og:description" content="Through this blog post, I'd like to document my progress in the fifth week of the Coding period, Google Summer of Code 2017. Also contains a summary of updates from the first month." />
    <link rel="stylesheet" type="text/css" class="ui" href="../../../assets/all.css">
    <link rel="stylesheet" type="text/css" class="ui" href="../../../assets/prism.css">
  </head>
  <body id="example" class="index" ontouchstart="">
    <!-- laptop display -->
    <div class="following bar">
      <div class="ui container">
        <div class="ui large inverted secondary network menu">
          <div class="item">
            <div class="ui logo shape">
              <div class="sides">
                <div class="active ui side">
                  <a href="../../../"> @athityakumar </a>
                </div>
              </div>
            </div>
          </div>
          <div class="right menu">
            <div class="item" style="color: white;">
              &nbsp;  
              <div class="ui breadcrumb">
                <div class="post_search">
                  <div class="ui fluid search">
                    <div class="ui icon input">
                      <input class="prompt" type="text" placeholder="Search posts.">
                      <i class="search icon"></i>
                    </div>
                    <div class="results"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Mobile display -->
  <div class="ui fixed inverted main menu">
    <div class="ui container">
      <div class="item" style="color: white;">
        &nbsp;  
        <div class="ui breadcrumb">
          <a href="../../../" class="section" style="color: white;">@athityakumar</a>
        </div>
      </div>
      <div class="right item" style="color: white;">
        &nbsp;  
        <div class="ui breadcrumb">
          <div class="post_search">
            <div class="ui right aligned search">
              <div class="ui icon input">
                <input class="prompt" type="text" placeholder="Search posts.">
                <i class="search icon"></i>
              </div>
              <div class="results"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="pusher">
  <div class="full height">
    <div class="zoomed masthead segment">
      <div class="ui container">
        <div class="introduction">
          <h1 class="ui inverted header">
            <span class="tagline">
              GSoC 2017 - Coding Period | Week 5  
            </span>
          </h1>
          <h4 class="tagline">  You're here : <a href="../../../">Homepage</a> > <a href="../../page1/">Blog</a> > <a>This Blog Post</a>
          </h4>
          <div class="ui hidden divider"></div>
          <div class="ui hidden divider"></div>
          <a href="#go" class="ui labeled primary icon button">
            <i class="angle double down large icon"></i> &nbsp; Read this post
          </a>
          <a class="ui labeled primary icon button" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fathityakumar.github.io%2Fblog%2Fposts%2FGSoC_2017_-_Coding_Period_|_Week_5%2Findex.html&amp;src=sdkpreparse" target="_blank">
            <i class="facebook large icon"></i> &nbsp; Share
          </a>
          <a class="ui labeled primary icon button" href="https://twitter.com/intent/tweet?text=Do+give+this+a+read.&url=https%3A%2F%2Fathityakumar.github.io%2Fblog%2Fposts%2FGSoC_2017_-_Coding_Period_|_Week_5%2Findex.html" target="_blank">
            <i class="twitter large icon"></i> &nbsp; Tweet
          </a>
          <!-- <a href="resume.html" class="ui labeled primary icon button">
        <i class="file pdf outline large icon"></i> View Resume
      </a> -->
        </div>
      </div>
    </div>
    <div id="go" class="ui vertical stripe intro segment">
      <div class="ui stackable very relaxed grid container">
        <div class="row">
          <div class="sixteen wide column center aligned">
            <div class="ui hidden divider"></div>
            <h2 class="ui title"> GSoC 2017 - Coding Period | Week 5</h2>
            <p class="ui description">Posted on 02/07/2017 at 3:10 PM by <a href="../../../">The Vibe</a>.</p>
            <p>
              <a href="../../tags/software/page1/" class="ui brown tag label"> Software </a>
              <a href="../../tags/development/page1/" class="ui brown tag label"> Development </a>
              <a href="../../tags/documentation/page1/" class="ui green tag label"> Documentation </a>
              <a href="../../tags/ruby/page1/" class="ui blue tag label"> Ruby </a>
              <a href="../../tags/gsoc/page1/" class="ui blue tag label"> GSoC </a>
            </p>
          </div>
        </div>
      </div>
      <div class='stackable very relaxed ui grid container fakeload'>
        <div class='row'>
          <div class="twelve wide column">
            <p><img src='../../../assets/images/load.png' class='ui centered image' data-src="../../../assets/images/blog/GSoC_2017_-_Coding_Period_|_Week_5/banner.png" alt="GSoC Banner image"></p>
            <p><span style='display:block; float:left; font-size: 200%;  color:#ffffff; margin-top:5px; margin-right:8px; padding: 10px 20px 10px 20px; text-align:center; background-color: #000;'>F</span>ollowing the end of the first month of coding, I&#39;m happy to inform that I&#39;ve successfully
              passed the first evaluation. According to my original timeline, this week was intended
              to be a Buffer period incase there is any delay in the first month of coding. Through this
              post, I&#39;d like to document the progress in this week, as well as the progress achieved
              in the first month of coding.</p>
            <p><br>
              <div class='ui horizontal divider'>Shared examples in tests</div>
            </p>
            <p>Till week 4, all the tests of daru-io importer modules had their own set of shared examples
              rather than having one single shared_examples for all importers. As these shared examples
              weren&#39;t format dependent, it definitely proved to be wiser to club them into a single
              shared examples section.</p>
            <p>For example, let us take the case of Excel Importer. Till the previous week, the tests used
              to look like this -</p>
            <pre>
  <code class='language-ruby' style='background-color : #fff;'>
  RSpec.describe Daru::IO::Importers::Excel do
    context 'loads from excel spreadsheet' do
      let(:id)    { Daru::Vector.new([1, 2, 3, 4, 5, 6]) }
      let(:name)  { Daru::Vector.new(%w[Alex Claude Peter Franz George Fernand]) }
      let(:age)   { Daru::Vector.new([20, 23, 25, nil, 5.5, nil]) }
      let(:city)  { Daru::Vector.new(['New York', 'London', 'London', 'Paris', 'Tome', nil]) }
      let(:a1)    { Daru::Vector.new(['a,b', 'b,c', 'a', nil, 'a,b,c', nil]) }
      let(:path)  { 'spec/fixtures/excel/test_xls.xls' }
      let(:order) { %i[id name age city a1] }
      let(:df)    { Daru::DataFrame.new({id: id, name: name, age: age, city: city, a1: a1},order: order) }

      subject { described_class.new(path).call }

      it_behaves_like 'daru dataframe'
      its(:nrows) { is_expected.to eq(6) }
      its('vectors.to_a') { is_expected.to eq(order) }
      its('age.to_a.last') { is_expected.to eq(nil) }
      it { is_expected.to eq(df) }
    end
  end
  </code></pre>
          </pre>
          <p>As you can see, the tests contain a lot of expectation variables rather than subject-related
            variables. Also, there are quite a few <code class='language-ruby' style='background-color : #fff;'>rubocop-rspec</code></pre>
           rules that are being voilated. For
          example, subject block should be present before any let. And in general, it&#39;s better to 
          avoid storing any variables for tests with let unless these variablesare used by the subject
          call.</p>
        <p>Hence, corresponding changes have lead to a much more readable test -</p>
        <pre>
  <code class='language-ruby' style='background-color : #fff;'>
  RSpec.describe Daru::IO::Importers::Excel do
    context 'loads from excel spreadsheet' do
      subject    { described_class.new(path).call     }

      let(:path) { 'spec/fixtures/excel/test_xls.xls' }

      it_behaves_like 'exact daru dataframe',
        ncols: 5,
        nrows: 6,
        order: %i[id name age city a1],
        data: [
          (1..6).to_a,
          %w[Alex Claude Peter Franz George Fernand],
          [20, 23, 25, nil, 5.5, nil],
          ['New York', 'London', 'London', 'Paris', 'Tome', nil],
          ['a,b', 'b,c', 'a', nil, 'a,b,c', nil]
        ],
        'age.to_a.last' => nil
    end
  end      
  </code></pre>
      </pre>
      <p>And the best part is that, all Importers now use the same shared-examples block called
        <code class='language-ruby' style='background-color : #fff;'>&quot;exact daru dataframe&quot;</code></pre>
      . Here is the block of code that makes the shared-example work :</p>
    <pre>
  <code class='language-ruby' style='background-color : #fff;'>
  #! spec/shared_examples.rb

  RSpec.shared_examples 'a daru dataframe' do |name: nil, nrows: nil, ncols: nil, **opts|
    it            { is_expected.to be_a(Daru::DataFrame) }

    its(:name)    { is_expected.to eq(name)           } if name
    its(:ncols)   { is_expected.to eq(ncols)          } if ncols
    its(:nrows)   { is_expected.to eq(nrows)          } if nrows

    opts.each { |key, value| its(key.to_sym) { is_expected.to eq(value) } }
  end

  RSpec.shared_examples 'exact daru dataframe' do |dataframe: nil, data: nil, nrows: nil, ncols: nil, order: nil, index: nil, name: nil, **opts|
    it_behaves_like 'a daru dataframe',
      name: name,
      nrows: nrows,
      ncols: ncols,
      **opts

    it            { is_expected.to eq(dataframe)      } if dataframe
    its(:data)    { is_expected.to ordered_data(data) } if data
    its(:index)   { is_expected.to eq(index.to_index) } if index
    its(:vectors) { is_expected.to eq(order.to_index) } if order
  end
  </code></pre>
  </pre>
  <p>Progress related to this, can be tracked in
    <a target='_blank' href="https://github.com/athityakumar/daru-io/pull/27">this Pull Request</a>.</p>
  <p><br>
    <div class='ui horizontal divider'>Rubocop-rspec and saharspec</div>
  </p>
  <p>The two libraries that really came in handy while tidying the tests, were 
    <a target='_blank' href="https://github.com/backus/rubocop-rspec">rubocop-rspec</a> and
    <a target='_blank' href="https://github.com/zverok/saharspec/">saharspec</a>.
    Rubocop-rspec is a plugin gem to rubocop, that extends rspec-related rules. Meanwhile,
    saharspec extends a few features to <code class='language-ruby' style='background-color : #fff;'>rspec-its</code></pre>
   that are more readable. For example,
  here is a usage of one of the methods added by saharspec, <code class='language-ruby' style='background-color : #fff;'>its_call</code></pre>
 :</p>
<pre>
  <code class='language-ruby' style='background-color : #fff;'>
  #! spec/daru/io/importers/sql_spec.rb

  #! SQL Importer without saharspec
  RSpec.describe Daru::IO::Importers::SQL do
    subject { described_class.new(source, query).call }

    context 'with path to unsupported db file' do
      let(:source) { 'spec/fixtures/plaintext/bank2.dat' }
      it { expect { subject }.to raise_error(ArgumentError) }
    end
  end

  #! SQL Importer with saharspec
  RSpec.describe Daru::IO::Importers::SQL do
    subject { described_class.new(source, query).call }

    context 'with path to unsupported db file' do
      let(:source) { 'spec/fixtures/plaintext/bank2.dat' }
      its_call { is_expected.to raise_error(ArgumentError) }
    end
  end
  </code></pre>
</pre>
<p><em>A side note : Do have a look at 
    <a target='_blank' href="https://github.com/zverok/saharspec/blob/master/README.md">saharspec&#39;s README</a>
    to understand the witty naming behind the unreleased gem.</em></p>
<p><br>
  <div class='ui horizontal divider'>Summary for first month</div>
</p>
<p>The first month of GSoC with SciRuby organization has been quite a great experience for
  me and I&#39;ve learned quite a lot about best practises with Ruby and architecture in general.
  Special thanks to mentors
  <a target='_blank' href="https://github.com/zverok">Victor</a>,
  <a target='_blank' href="https://github.com/v0dro/">Sameer</a> and
  <a target='_blank' href="https://github.com/lokeshh">Lokesh</a>
  for guiding me through this project.</p>
<p>As of the first month, here are the summarized updates with corresponding
  Pull Request links for reference :</p>
<h4> 
  <ul class='ui list'>
    <li><a target='_blank' href="https://github.com/athityakumar/daru-io/">Daru-io</a> gem repository has been setup with
      required tools such as Rubocop, Rspec, Travis and 
      <a target='_blank' href="http://www.rubydoc.info/github/athityakumar/daru-io/master/">Yard documentation</a>.</li>
    <li>Fixture files required for tests, have been added with
      <a target='_blank' href="https://github.com/athityakumar/daru-io/pull/17">this Pull Request</a></li>
    <li>Existing IO modules of daru have been ported to daru-io with
      <a target='_blank' href="https://github.com/athityakumar/daru-io/pull/16">this Pull Request</a>.</li>
    <li>New IO modules added :</li>
  </ul>
   </h4>
<ol>
  <li><a target='_blank' href="https://github.com/SciRuby/daru/pull/311">HTML Importer</a> </li>
  <li><a target='_blank' href="https://github.com/athityakumar/daru-io/pull/18">Redis Importer</a></li>
  <li><a target='_blank' href="https://github.com/athityakumar/daru-io/pull/21">JSON Importer (with json-path option)</a></li>
  <li><a target='_blank' href="https://github.com/athityakumar/daru-io/pull/26">Mongo Importer</a></li>
</ol>
</div>
<div class="four wide column">
  <div class="ui fluid centered card">
    <div class="content">
      <a class="header ui blue top left attached label">Tags</a>
      <p class="description">
        <div class="ui hidden divider"></div>
        <div class="tag_search">
          <div class="ui fluid search center aligned">
            <div class="ui icon input">
              <input class="prompt" type="text" placeholder="Search tags.">
              <i class="search icon"></i>
            </div>
            <div class="results"></div>
          </div>
        </div>
        <div class="ui hidden divider"></div>
        <a href="../../tags/team_auv/page1/" class="ui red tag label">TEAM AUV</a>
        <a href="../../tags/metakgp/page1/" class="ui black tag label">Metakgp</a>
        <a href="../../tags/iit_kharagpur/page1/" class="ui violet tag label">IIT Kharagpur</a>
        <a href="../../tags/web/page1/" class="ui brown tag label">Web</a>
        <a href="../../tags/software/page1/" class="ui brown tag label">Software</a>
        <a href="../../tags/design/page1/" class="ui brown tag label">Design</a>
        <a href="../../tags/development/page1/" class="ui brown tag label">Development</a>
        <a href="../../tags/experience/page1/" class="ui green tag label">Experience</a>
        <a href="../../tags/rant/page1/" class="ui green tag label">Rant</a>
        <a href="../../tags/documentation/page1/" class="ui green tag label">Documentation</a>
        <a href="../../tags/javascript/page1/" class="ui blue tag label">JavaScript</a>
        <a href="../../tags/python/page1/" class="ui blue tag label">Python</a>
        <a href="../../tags/ruby/page1/" class="ui blue tag label">Ruby</a>
        <a href="../../tags/php/page1/" class="ui blue tag label">PHP</a>
        <a href="../../tags/ruby_on_rails/page1/" class="ui blue tag label">Ruby on Rails</a>
        <a href="../../tags/c++/page1/" class="ui blue tag label">C++</a>
        <a href="../../tags/chess/page1/" class="ui orange tag label">Chess</a>
        <a href="../../tags/music/page1/" class="ui orange tag label">Music</a>
        <a href="../../tags/gsoc/page1/" class="ui blue tag label">GSoC</a>
      </p>
    </div>
  </div>
</div>
</div>
</div>
<div class="ui stackable very relaxed grid container">
  <div class="row">
    <div class="sixteen wide column center aligned">
      <a href="../GSoC_2017_-_Coding_Period_|_Week_4/" class="ui labeled primary icon left floated button">
        <i class="angle double left large icon"></i> &nbsp; Previous post
      </a>
      <a href="../GSoC_2017_-_Coding_Period_|_Week_6" class="ui right labeled primary icon right floated button">
        Next post &nbsp; <i class="angle double right large icon"></i>
      </a>
    </div>
  </div>
</div>
<div class="ui stackable very relaxed grid container">
  <div class="row">
    <div class="sixteen wide column center aligned">
      <div id="disqus_thread"></div>
    </div>
  </div>
</div>
</div>
</div>
<div class="ui black inverted vertical footer segment">
  <div class="ui center aligned container">
    <div class="ui stackable inverted grid">
      <div class="sixteen wide right floated column">
        <h4 class="ui inverted teal header">
          Built with &nbsp; <i class="heart icon red small"></i> by @athityakumar.
        </h4>
      </div>
    </div>
  </div>
</div>
</div>
<a href="#" class="scrollToTop"><span class="ui primary icon button"><b><i class="angle double up large icon"></i></b></span></a>
<script>
  window.less = {
          async        : true,
          environment  : 'production',
          fileAsync    : false,
          onReady      : false,
          useFileCache : true
  };
  
  var post_content = [
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_12/",  post_title: "GSoC 2017 - Coding Period | Week 12" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_11/",  post_title: "GSoC 2017 - Coding Period | Week 11" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_10/",  post_title: "GSoC 2017 - Coding Period | Week 10" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_9/",  post_title: "GSoC 2017 - Coding Period | Week 9" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_8/",  post_title: "GSoC 2017 - Coding Period | Week 8" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_7/",  post_title: "GSoC 2017 - Coding Period | Week 7" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_6/",  post_title: "GSoC 2017 - Coding Period | Week 6" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_5/",  post_title: "GSoC 2017 - Coding Period | Week 5" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_4/",  post_title: "GSoC 2017 - Coding Period | Week 4" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_3/",  post_title: "GSoC 2017 - Coding Period | Week 3" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_2/",  post_title: "GSoC 2017 - Coding Period | Week 2" },
  
      { url: "../GSoC_2017_-_Coding_Period_|_Week_1/",  post_title: "GSoC 2017 - Coding Period | Week 1" },
  
      { url: "../GSoC_2017_-_Community_Bonding_Period/",  post_title: "GSoC 2017 - Community Bonding Period" },
  
      { url: "../GSoC_2017_-_Acceptance_of_Student_Proposal/",  post_title: "GSoC 2017 - Acceptance of Student Proposal" },
  
      { url: "../A_Tale_of_GitHub_Usernames/",  post_title: "A Tale of GitHub Usernames" },
  
      { url: "../Inbound_API_Gem/",  post_title: "A Ruby API gem for Inbound.org platform" },
  
      { url: "../GitHub_Follower_Notification_App/",  post_title: "GitHub Follower Notification App" },
  
      { url: "../The_Covariance_Confusion/",  post_title: "The Covariance Confusion" },
  
      { url: "../Kharagpur_Winter_of_Code_2016/",  post_title: "Kharagpur Winter of Code 2016" },
                { url: "../Hello_World/",  post_title: "Hello World" }
      ];
  
  var tag_content = [
  
      { url: "../../tags/team_auv/page1/",  tag_title: "TEAM AUV", color: "red" },
  
      { url: "../../tags/metakgp/page1/",  tag_title: "Metakgp", color: "black" },
  
      { url: "../../tags/iit_kharagpur/page1/",  tag_title: "IIT Kharagpur", color: "violet" },
  
      { url: "../../tags/web/page1/",  tag_title: "Web", color: "brown" },
  
      { url: "../../tags/software/page1/",  tag_title: "Software", color: "brown" },
  
      { url: "../../tags/design/page1/",  tag_title: "Design", color: "brown" },
  
      { url: "../../tags/development/page1/",  tag_title: "Development", color: "brown" },
  
      { url: "../../tags/experience/page1/",  tag_title: "Experience", color: "green" },
  
      { url: "../../tags/rant/page1/",  tag_title: "Rant", color: "green" },
  
      { url: "../../tags/documentation/page1/",  tag_title: "Documentation", color: "green" },
  
      { url: "../../tags/javascript/page1/",  tag_title: "JavaScript", color: "blue" },
  
      { url: "../../tags/python/page1/",  tag_title: "Python", color: "blue" },
  
      { url: "../../tags/ruby/page1/",  tag_title: "Ruby", color: "blue" },
  
      { url: "../../tags/php/page1/",  tag_title: "PHP", color: "blue" },
  
      { url: "../../tags/ruby_on_rails/page1/",  tag_title: "Ruby on Rails", color: "blue" },
  
      { url: "../../tags/c++/page1/",  tag_title: "C++", color: "blue" },
  
      { url: "../../tags/chess/page1/",  tag_title: "Chess", color: "orange" },
  
      { url: "../../tags/music/page1/",  tag_title: "Music", color: "orange" },
                { url: "../../tags/gsoc/page1/",  tag_title: "GSoC", color: "blue" }
      ];
</script>
<script src="../../../assets/all.js"></script>
<script src="../../../assets/prism.js"></script>
<script>
  /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  
    var disqus_config = function () {
    this.page.url = "http://athityakumar.github.io/blog/posts/GSoC_2017_-_Coding_Period_|_Week_5/index.html";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = ""; // Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
  
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://athityakumar-github-io.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
</body>
</html>